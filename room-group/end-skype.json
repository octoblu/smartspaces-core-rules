{
	"rules": {
		"addPeopleInRoom": {
			"conditions": {
				"all": [{
					"fact": "data",
					"operator": "equal",
					"value": true,
					"path": ".genisys.inSkype"
				}, {
					"fact": "data",
					"path": ".genisys.currentMeeting",
					"operator": "exists",
					"value": false
				}]
			},
			"event": {
				"type": "meshblu",
				"params": {
					"operation": "update",
					"uuid": "{{data.genisys.devices.activities}}",
					"as": "{{data.uuid}}",
					"data": {
						"$set": {
							"genisys.activities.endSkype": {
								"title": "End Skype",
								"people": "{{data.genisys.peopleInRoom}}",
								"message": {
									"devices": ["*"],
									"metadata": {
										"jobType": "end-skype"
									},
									"data": {}
								}
							}
						}
					}
				}
			}
		},
		"addPeopleByAttendee": {
			"conditions": {
				"all": [{
					"fact": "data",
					"operator": "equal",
					"value": true,
					"path": ".genisys.inSkype"
				}, {
					"fact": "data",
					"path": ".genisys.currentMeeting",
					"operator": "exists",
					"value": true
				}]
			},
			"event": {
				"type": "meshblu",
				"params": {
					"operation": "update",
					"uuid": "{{data.genisys.devices.activities}}",
					"as": "{{data.uuid}}",
					"data": {
						"$set": {
							"genisys.activities.endSkype": {
								"title": "End Skype",
								"people": "{{data.genisys.people.byAttendee.isAttendee}}",
								"message": {
									"devices": ["*"],
									"metadata": {
										"jobType": "end-skype"
									},
									"data": {
										"meetingId": "{{data.genisys.currentMeeting.meetingId}}"
									}
								}
							}
						}
					}
				}
			}
		}
	},
	"noevents": [{
		"type": "meshblu",
		"params": {
			"operation": "update",
			"uuid": "{{data.genisys.devices.activities}}",
			"as": "{{data.uuid}}",
			"data": {
				"$unset": {
					"genisys.activities.endSkype": true
				}
			}
		}
	}]
}
